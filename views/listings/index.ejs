<% layout("/layouts/boilerplate.ejs")%>

<style>
	#filters {
		display: flex;
		align-items: center;
		justify-content: space-evenly;
		flex-wrap: wrap;
		margin-top: 1rem;
	}
	.filters {
		text-align: center;
		opacity: 0.7;
	}
	.filters:hover {
		opacity: 1;
		cursor: pointer;
	}
	.filters p {
		font-size: 0.8rem;
	}
	.filters i {
		font-size: 1rem;
	}
	.tax-info {
		display: none;
	}
	.tax-switch {
		border: 1px solid rgb(153, 143, 143);
		border-radius: 1rem;
		padding: 0.8rem 0.6rem;
		font-size: 0.8rem;
		text-align: center;
		display: flex;
		align-items: center;
		font-weight: 600;
	}
</style>

<div id="filters">
	<div class="filters">
		<i class="fa-solid fa-fire"></i>
		<p>Trending</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-person-swimming"></i>
		<p>Amazing pools</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-mountain-city"></i>
		<p>Mountains</p>
	</div>
	<div class="filters">
		<i class="fa-brands fa-fort-awesome"></i>
		<p>Castles</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-sun-plant-wilt"></i>
		<p>Tropical</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-bed"></i>
		<p>Rooms</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-city"></i>
		<p>Iconic cities</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-person-skating"></i>
		<p>Skateboarding</p>
	</div>
	<div class="filters">
		<i class="fa-regular fa-snowflake"></i>
		<p>Arctic</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-campground"></i>
		<p>Camping</p>
	</div>
	<div class="filters">
		<i class="fa-solid fa-cow"></i>
		<p>Farms</p>
	</div>
	<div class="tax-switch">
		<div class="form-check-reverse form-switch">
			<input
				class="form-check-input"
				type="checkbox"
				role="switch"
				id="flexSwitchCheckDefault" />
			<label
				class="form-check-label"
				for="flexSwitchCheckDefault"
				>Display total after taxes</label
			>
		</div>
	</div>

	<h1>All Listings</h1>

	<div class="row row-cols-lg-3 row-cols-md-2 row-col-sm-1">
		<% for(let listing of allListings){ %>
		<a href="/listings/<%=listing._id%>">
			<div class="card listing-card col">
				<img
					src="<%=listing.image.url%>"
					class="card-img-top"
					alt="listing_image"
					style="height: 20rem" />
				<div class="card-img-overlay">abcd</div>
				<div class="card-body">
					<p class="card-text">
						<b><%=listing.title%></b> <br />
						&#8377; <%=listing.price.toLocaleString("en-IN") %>/ night
						<i class="tax-info">+ 18% GST</i>
					</p>
				</div>
			</div>
		</a>

		<% } %>
	</div>
</div>

<script>
	let taxToggle = document.getElementById('flexSwitchCheckDefault');
	taxToggle.addEventListener('click', () => {
		let taxInfo = document.getElementsByClassName('tax-info');
		for (info of taxInfo) {
			if (info.style.display != 'inline') {
				info.style.display = 'inline';
			} else {
				info.style.display = 'none';
			}
		}
	});
</script>
